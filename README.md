# Hunter Bergstrom - Miniproject
## Installation
First, clone this repo to install the miniproject. Then, install the  following:
- [NodeJS](https://nodejs.org/en/) (LTS recommended; go to 'Previous Releases' and install v18.19.0)
- [Docker](https://www.docker.com/)

Once you have installed these, run the command `npm i` within the miniproject folder to install the dependencies for the project. Following this, in the miniproject folder, create an empty folder called 'db'. After that, open Docker. In the search bar on top, search for "mongo", pull the latest version, and then select "Run". Click on the optional settings and enter the container name as "minimongo". For host port, enter "27017". For host path, enter the path to the db folder in the miniproject folder that you just created, and for container path, enter "/data/db". After this, just run the container and the mongodb instance should be deployed. Finally, after all of this is set up, simply run the command `node app.js` to deploy this project, and navigate to `http://localhost:8888` in your browser to view it.

## Implementation
### Seed
This repository contains a seed file already called "seed.webgmex". By default, this seed will be available for the user to select when creating a new project in WebGME. However, if you would like to use your own seed, you can do so using the command `webgme new seed -f newSeed.webgmex newSeedName`.
### Visualizer
The visualizers folder has two parts: panels and widgets. The panels folder contains both the panel file (OthelloVizPanel) and the control file (OthelloVizControl). The panel file sets up the actual framework of the panel and its underlying functions. The control file is what actual controls the elements of the panel. It has the functions that will be called when updates are made to the board by interacting with it during the game. These are mainly handler functions that keep track of state and call the plugins included when they are needed. This includes toolbar functions as well.
### Plugins
There are a few plugins that are used to update the state of the game as the user interacts with the board. They are as follows:
- **AutoPlace**: This plugin is written in Python and will automatically place a valid piece on the board (this implements the bonus "Auto" functionality). It calls ValidTiles to get a list of valid tiles and then selects the first entry in the list. It then calls FlipTiles with the tile of this first entry and its associated list of pieces it can flip.
- **BuildOthello**: This plugin is written in Python and creates a structured data model in the form of a JSON object that can be used to represent the model for visualization purposes. It essentially contains the information used to build the board, which is constructed after calling ValidTiles.
- **FlipTiles**: This plugin is written in Python and takes in two arguments: the position to place the new piece (`pos`) and the list of pieces that will be flipped upon placing the new piece (`chains`). With these arguments, assuming the position is a valid tile for the next move (which it already should be, but there is a check in the function anyways), it will create a new game state with a new piece placed on the tile with the position and will flip all the pieces in the list (this implements the required "Flipping" functionality). It will also automatically update the count of each type of piece on the board and include this in the new game state as well (this implementes the required "Counting piece" functionality). It finally calls ValidTiles to update the state of each tile before saving the new game state.
- **Undo**: This plugin is written in Python and simply performs an undo function. It replaces the current game state that the Game is pointing to with the previous game state (this implements the required "Undo" functionality). It also automatically deletes the current game state that was just undone.
- **ValidTiles**: This plugin is written in Python and checks to see which tiles are valid; that is, tiles on which a new piece can be placed during the next move (this implements the required "Highlight valid tiles for the next move" functionality). In addition to this, it will also return a dictionary with keys that represent each valid tile and corresponding values that contain all the pieces that will be flipped if a new piece is placed on that tile.

## Usage
### Current Status
While the visualizer is not currently fully functional, if you open the OthelloViz tab from the Game directory, the undo (rewind icon) and auto (shuffle icon) buttons on the toolbar are functional! To see their effect, open the Game folder in the panel on the right and check out the new game states as they are created (from auto) or deleted (from undo).

*Update*: A board will show (after waiting a few seconds), but the functionality to place tiles yourself will NOT work! However, you can use the auto button on the top toolbar to automatically place new tiles. After doing this, you must wait a few seconds (5-15) for the board to update.
### General
After running this project and creating a new project in WebGME based on the supplied seed ("seed"), an Othello game can be played. Assuming the visualizer works, simply navigate to the Game folder and open the OthelloViz visualizer on the lefthand side. It will take a few seconds to load. To play the game, place pieces on whatever tiles are valid on each turn, which should be highlighted when you put your cursor over them. A string of text on top of the board should tell you whose turn it is. Other text will inform you of how many tiles each player currently has on the board. Additionally, on the top toolbar, there is an undo icon which will undo the last move, and an auto icon that will automatically place a tile for this turn. If you do not want to undo a whole bunch and want to start a new game, simply create a new project with the supplied seed. Have fun and enjoy your (hopefully functional) game of Othello!

